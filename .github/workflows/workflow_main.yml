name: write the ysml file for sonarcube
on: 
 push:
  branches:
   - main
jobs:
 run-on: ubuntu-latest
  steps:
   - name: checkout the code
     uses: action/checkout@v2
  - name: install the npm install
    run: |
     npm install
     npm install -D webpack-cli
  - name: build the node code
    run: |
       npm run build
       npm test
       npm run coverage
       - name: running on SonarQube Analysis
    environment:
      SONAR_RUNNER_HOME: "SonarQube Scanner 3.0.3"
      run: |
          ${SONAR_RUNNER_HOME}/bin/sonar-scanner
          -Dsonar.projectKey=serverless
          -Dsonar.sources=.
          -Dsonar.javascript.lcov.reportPaths=coverage/lcov.info
          -Dsonar.java.binaries=./*
          -Dsonar.host.url=http://localhost:9000
          -Dsonar.login=sqp_57ea10a1eec13aa3ff2c8a213c90312d5f72a392
